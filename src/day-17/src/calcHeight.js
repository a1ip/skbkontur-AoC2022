const { Tetris } = require("./model/tetris");

const movesPattern = '>><<>><<>><><<>><<><>>><>>>><<>>>><<<<>>><<<>>>><>><<<<>>>><>><>>><<><>><<>><<>>><<>><<<<>>><>><<<>>>><<>><<><<><<>><><<<<>>><><<<<>>><<>><<<<>>><<<<><<><<>>>><<<>>><<<><>><<>>><<><<<<>><<>>><>>>><<>>>><<<<>><<<>><<<<>>><<>><<<<>>><<>>>><<<<>>><>>><>>><><>>>><><<<<><<<><<>><<<>><<<><>>><>><>>>><<<<>><<><<<>>>><>>><<<<><<<><<><>>>><<<<>><<>>>><<<>><<<<>>>><<<>><<>><>><<<<><<<<><<>>>><<>>><><<>><<<>><<<<>>><<<<>>>><>>><<>>><>>><<<>><><<>><<<<>><<<>>><<<>>>><<<><<<>>><<<>><<>>>><><>><<><<<><>>>><<>>><<<<>><<<<>><<<<>>><<>><<><><<<<>>>><<>><<<><>>>><<><<<>>><<<<><<><>>><<>>><><>>>><<<>>><<<>><><<<<>>><<<<>>>><<<<>>>><<>><<<><>>><<<<>>>><<<<>><<<<>>>><<<<><<<>><<<<><>><<<<>>>><><<>><<>>><<<<>><<>><<<><<<>>>><<>>>><>>><<<>>>><<<><<>>>><<<><<><><<>>><<>>>><<<<>>><>>><<<<>><<<><<><<<<>><<<><<<<>>>><>><<<<><<<>>><<<>>>><>>><<<<>>><<>><>>>><>>>><<<<>>><>>><<<>>>><<<<><>>><>>><>>>><>>><<<>>>><>><<<>>>><<>>>><<<<>>>><<<>>><<>>>><<<>>><>>>><<<><>><><<<<><<<<>><<><<<>>><<<<>>>><<>>><<<<>><<<>><<<<><<>><<<>>>><<<>>>><<<><>>><<<>>>><<>>>><<<><<<<>>>><<<<>><>><<<<>>><>>><<><>><<>>>><<>><<>><<>>><<>>><<<<>><<<<>>><>>><>>>><<>>><<>>><>>><<<<><>>><<<>>>><<<<>><<<<><<<<>>><<>>>><<>>><<<>>>><>><<<>>>><<<<>><<<><<<<>>><<<>>>><<<><<>>>><<>>><<<><>>><><<><<>>><<<>><<<>>><<>>><<>>>><<<>>>><<<<><<>><<<>>>><<>>>><<>>>><<<>><>>>><<>><<<<>>>><<<>>><<>>>><<><<<>>><<<<>>>><<<<>>><<>>>><<<<><>>><<<><>><<>><<<><>><<<>><>><<<<>><>><>>>><<>><<>><<<<>>><<<>>>><<>>>><<>><<<<><>>>><<>><<><><<<><>>><<<<>>>><<<>>><>><<><<<<>>><<<<>><<>><<><><>><<<<><<<<>>>><<>>><>>>><<<>><<>><<>>><<<<>>><<<<><<<<>>><<<<>><<<<><<<><<><>>>><<<<>><<><<>><>>><<<<>>><<<><<<<>>><<>>><<<>>><>>><>><<><><<<<><><<<<>>><<<>><<><<<<>>>><>>><<<>><<<<><>><<<<>>>><<<<>><<<<>><<<<>>>><<><<<><<>><<<><<<<>><<<<>><<<<>>>><<<><<>>><<>>>><<<<>>>><<<>>>><<<<><<<<>>>><<<>>>><<>>>><>>>><<>>>><>>>><<<>>><<<<>><<>>>><<<<><<<<>>><<<<>>>><>><<<>><><<<<>>><>>><>>>><<<<>><<<>><<<<>>><<>>><<<<><<>><<<>>><<>><<<><<>><<>>>><<><<><>><>>>><<><><<><<<>>><<<<>>><>><<<<><<>>><><<>>><<<<>><<>>>><<>>>><><<>>>><<>>><<<>>>><<<>>>><<>>><>>><>><<<<>>><<<><<><<<<><<><<<<>>><>><<<<>>>><><<<>>>><>>>><<<<>>><>><<<>>><<<<>><>><>><<>>>><<<<>>><<<>>><<>>>><<<<><<>><<<><<<<>>>><>>>><<<>>><<<<>>>><><<>>>><<<<>>>><<>>><<<<>><<<<>>><>>>><>>>><<>><<<>>><>>><>>><<>>><<><<<<>>><<>>><<>>><<<><>><<<>>><<<<>>><<>>><<<><<<<>>>><>>><>><<>>>><<<>>><><><<<>><<<<><<<><<<><<>>>><<<<>>>><>><<<<>><<>><<<>>><<>><<<<>>>><<<>>><<<>>><<<<>>><<<>>><<<><<<<>>>><<<<>><<>><<<>>>><<><<<>>><<>><<<<><<<>><<<<>>>><>><<<><<<<>>><<>>>><><<<>>>><>><<><<<<>><<<>>><<<>>><<><<<<>>>><<<<>>>><>>>><<<><>><<<<><><<<>><>><<<<>>>><<>>><<<>>>><<<<>>>><<<><><<<>>>><<>><<>>>><<>><<>><<>><<<<>>>><<<<>>>><<<>>>><<<>>>><<<>>>><<<<>>>><<<>>>><<>><<>><<<<>>><<><<<<><<>>>><<>>>><<>><<<<><<>>><<<>>>><<>>>><<><<>><<>><<><<<<>>>><<<>>><>><>><<<<>><<<>><<<<>>>><<<<>>>><><>>><<<<>><<<>>><<<>><><<<<>><<<<>><<<<>>>><>><<>>>><<>>>><>><<>>>><<<<><<<>><>>>><<<<>>><<<><<<>>>><>>>><<>><>>>><>><<<<>>>><><>><<<>>><>><>><<<<>>>><>>>><<<>><><<><<>>>><<>>>><<>>><><<>>>><><<<>><<>>><><<<>>><<<><<<><<<>>><>><<><<<<>><<<<>>>><>>><<<>>><<<<><>>><<>>><<><<>><><<<>><>>>><<<><><<<<>>>><<<>><>>><<>>>><<<<>>><>><<<>><>>><<><<<><>>><<<<>>><<<>><<>>><>><<<>>><<<<>><<>><<<<>>>><>><<>>><>>><<<>>><>>><<<<><<><>><>>><<>>>><<>>>><<<<><<<<>>>><<>>><<><<>>><>>>><<<>>><>>>><<<>>><<<>>>><<<<><<>>>><>>><<<<>>><<<<>>><><<<<>>>><<>><<<>><<><>><>><>>><<<><><>><<><>><<<>>>><<<>>><<<<>>><<>><><<<<>>><<<<><<<>>>><<<<>><<<>>><<>><>><>><<<<>><<<<>>>><>>>><<<<>>><<>>><<<>>><<<><<<><><<>>><<<>>>><<<<>><<<>>>><<><<<><<>>>><<><<<>><<><<>>>><<<><<<<>><>>><<<><<><<<<><<>><>><>>>><>>>><<<<>><<<>><<<>>><<>>>><<>><<>><<><<<<>>>><<<<>><<<<>>><>>>><<<<><<<>>>><<>>>><<>>><<<>>><<<>>><<><<>>>><><<<<>>><<<>>>><<><<<<><<<>><<<>><<<>>>><<<<>>><<><<<<><<<>>>><<>><>>><<<<>>>><>><>>>><<>>>><>><>>>><<<><<<<>>><<>>><>>><>>><><<<<><><>>>><<<<>>>><<<<>>><<>>><<>>><>>>><<<<>>><>>><>><>>>><<>><<><>><><<<><<>><<><<<<>>>><>><<<>>><<>>><<<>>>><<<<>><<<>>>><<>>><>><<<><>><<<<>>>><<><<>><<<>><<>>>><>>><<<<>>>><<<>>><<<>>><<<>>>><<<><<<>>><<>>><>><<>><>><><>><>>>><>>><<<>>><<<<><>>>><<<>>><>><><<>><<<<>><<<<>>>><>><<>>><<>>>><<<<>>>><<<>>>><<<<>><>>>><<>><>><<<><<>>><<<<>><>><<<<>><>>><<<<>>><>>>><>>>><<<><<>>><><<<<>><>><<<<>>><<>><<<<>>>><<<><><<<<>><<<<>>>><<<<>>><<<>><<<<>>><<>><<>>>><<<<>><<>>>><<>>>><<<>>>><>>>><<>>><><<<><><<<>>>><>>><<<<>><>>>><<<>>><<<>>><>><<<>>><<<>>>><<<<>><>><<<<>>>><<>>><<><>><<<>><<<<>>><<<<><<<<><<<>>><<<<>>>><>>>><><<<><<><>>>><><>>>><<>><>>><<<<>><<<<>><>><<>>>><<>><<>>><>>>><<>>>><<<<>>>><>><>>><<><>><<>>><<<>>>><<>>><<<<>>><<<<>>>><<<<><<><<>>>><<<>><<>><<<<><<>>><><>><<>>>><><<<<>><<<><<>>>><<<><<><<>><<>>><>>>><<>>>><><>>><<<<>>>><<>><<<><<<<>><<<>>><<<>><<<<>>>><<<<>>>><<>><>><<<<>>><><<<>>><>><<<>><>>>><<<>>><<>>>><<<<><<>><<<>><<<>>>><>><<>><<><<>><<>>>><<>>><><<<>><>><><>><<<>>>><<<><<>>><>><>>>><<<><>>><<<><<>>><<>>>><<<<>><<<>><<><<<<>>><><<<>><>>><<><<<>>>><>>><>><>>><<<<>>><><<<<>>><<>>>><<<<>>>><>>><<><<<<>>>><<>>><>>><><<<>>><<<>><<<<><<<>>>><<<>>><<<<>>>><<<<>>>><<>>>><<<<><>>>><>>>><<<>>>><<>>><<>>>><<<<>><<>><<<>><<>>><<>>>><<><<<<>>>><<<>><<<>>>><<<<>><<<>>>><<>>>><<>><<>>>><<<>><>>>><<<>>>><<<>>>><<<><>><<>><>><<<>>>><<<<>>><<<<>>><<><<<<>>><><<>>>><<<>>>><>>>><<><<<>>><<><>><<<<>>><><<>>><<<<>>>><<<>><<<>><<<>>><<<>><<<>>>><<>>>><><<<>><<<<><>>><><<>>>><><<<<><<>>>><<><<<<>>><<<>>><<<<>><<><<<<>>><<<<><<>>><<>><>><>><<<>><<<>><<>><<<<>>>><<<><<>>>><>>><<><<>><<<>>>><<<>>><>>><<<>>>><<<<><<>>><<<<>>>><<>>><<<<>><<>>><><<<<><<<>>>><<<>>>><>>><>><<<<>>><<>><>>>><<<><<<<>>><<>>>><<<>><<<><<<<><<<<>>><<<><<<>>><<>><<<>>><<<<>><>>>><>>><<>>>><<>>><<<<>>>><<><>>>><<<><<<>>><<<><>><<<<>>>><<<>>>><<>><>>><<<<>><>><<>><<<>>>><<<><<<<>>><>>>><<<>>><<><<>>><<<<>>><<<<><<>>>><>>><<<<>>>><<<<>><<<>>><<<>>><<<<>><<<><<<><<<<>>><<>>><<<<><<<>>><>><<<><<<><<<><>><<><<<>>><<<>><<<<>><<<<><<<<><<<<><<<<>>>><<>>>><<<>>><<<>>><<<<>>><<>>>><><>><>>>><<>>>><<<>><<<><<>><<<<>>><<>>>><>><<>>>><<<><<>>>><<<>>><<<<><<><<<<><<>>>><<<>>><<<>>>><<>>>><><>><<<>>>><<<<>><<<<>>>><<>>><<<<><<><><<<<>><<<<>>><<<<>><<<<>>><<<<>><>><<<<><<<>><<<<><<<>>><<>><<<>>><><<<>>>><<>>><<<>>><>><<<<>>>><<<<>><<<><<<<>>>><<<<>>><<<><<<<>>><>>>><<<>>>><<<>>><<<<>><<<<>>><<<>><<<>>><<<<><<<<><<<><>>><<<<>><><<<<><><<<><><>><<>><>>>><<>><<<>><<<<>><>>>><<>><<<<>>><>><<<>><<<<>>><<<><>><<><><><<<<>>>><<<<>>><<>><<>>>><<>>><<<>>><<<<><>><>><<<<><<<<><>><<><<>>>><><<<<>><<>><<<<>>>><<<>>><<<<>>>><<<<>><<<><<>>><<<<>>>><<<>><<<><<<<>><>><<>>><<<>>>><<<<>><<>>><<<>>><<<<><<<><<<<>>><<>><<>>>><<><>>><<>>>><<>>><<>>>><<>>><<<><<>>><>>>><<<>>><<<><<>>>><<<<>>><<<<>>>><<<>><<><<><<<<><<<><<<><<<><>>>><<>>><><<>>>><>>><<>>>><<<<><<<>><<>>><<<>>><<<<>><>><<>>>><<<<><<<><<<>>>><<<<>><>>><>>><<><<<<>><<<<>>>><<<>>><><>>><<<>>>><<<<>><<<>>><>>><<<<>>><<<<>>>><>><<<<>><<<><>><<>><<>>><>><<>>>><>>>><<<<>><>>>><<<>><<>>>><<<>>>><<>><<>>><<<<>>><<<>>>><<>>>><<>><<>>><<><<<>><<<>>><><<>>>><<<<>>><<<>>><>>><<<<>>>><<<<><<<>><>>>><>><<<<>><<<<><<<>>><<><<<>>><<<<>><<>>>><<<<>>><<<<>>>><>>>><><<><>>><<<>><<<>>>><<><<<>>>><<><<<<>>>><<<>>>><<<>>><<<<><>>><<<>>><><>>>><>>>><>>>><<<>><<<<>><<<<>>>><<>>><<>>><<<>><<>>><<<<>>>><<<<>>>><<><<<<>>><<<>><>>>><>>><>>><<<>>>><<><<<<>>><<<<>><<<<><<<>><<<><<<<><<<>><>>>><>><><<<<><>>><<<<>>><<<>><<<>>>><<<<>>><<<<><<<>><<>>>><<>>>><<<>>><>><>><>><<><<<>>>><<<<>>><<<>>><<<>>><>>>><<<<>>>><<<<>>>><<><<<<>>>><>><<<<>><<<<>>><<<<>>>><>><<<<>>><<<><<<<>>><>><><<<>>>><<<<>>><<<<>><<<>>><<>>>><<<>>><<<>>>><>>>><<<<>>>><<>>><<<>>>><<<><<<>><<><<<>><<<><>><<>>><<<><<>><<<>>>><<<<><<<><<>><<<>>>><<><<<<><<>>><<>>><<<<>><<>>>><<<>><>>>><<><<>>><<<>>>><<<>>>><<><<<<>>>><<<<>><<<<>>><<<<>>>><<>>>><<<><<>>><<<>>>><<<>>>><<<><<<>>><<>>><<>>>><><<>>>><<><<<<>>><<<<><>>><<<<>>>><><<<<>><<><<>><<<<>>>><<<<>>>><<<<>><<<<>>><><>>>><<<<>>>><<><<><<<>>><><<>>>><>>><<<<>><>><>><<<<>>><>><<<>>>><<>><<<>>><><<>>><>><<<><<<><<<<><<>><<>>>><<<<><<>>>><<<>>>><<<>>>><<>>>><>><<<<><<<>>><><<<><<<<>>>><><<<>>><>>>><<<<>><<<<>>><>>><<<<>>><<<<>><<<<><><>>>><><>><<>>>><<<<>>><<<><<>><>>>><<<>>>><<<>>>><<<<>><<<<>><<<<>><>>><><>>>><<<<>>><<<<>>>><<>>><<<<>>>><<<<>><<<>>>><<<>>><<<>>><<<>>>><<<>>>><<<>>><<<>><<<<>><<<>>><><<>>>><<<><<><<<<>>><>>>><>>>><>><<<><<>>><<<>>>><><<><<<<>>>><<<>>>><<>><>>><<>><<<>>><>>>><<>>>><<<<><<<>>>><<<<><<<<>><<<>>><<<><<<<>>><<<><<<>>>><>>>><><>>>><<>><<<<>>><<>><><>><<<<><>><<<<>><>><<<>>><<<<>>><<>>><<<<>>><<><<<<>>>><<<<>><<<>>><<<<>>><<>>><<<<>><<><<<<>>><<<><<<<><>>><<<<>><<>>>><<<<>>><<<<>>><<<>>><<<<><<>>>><<>>>><<>>><<<<>>>><<<>>><<<<><<>><<<<><<<<>>>><<<<>>><<>><<<<>>><<<>>>><>>>><<>>>><<<<>><<><<>>>><<>>><<<>><<<><>>><<>>><<>><>><<>>>><>>><<<<>><<<>><>><<<<>>><<<<><><<>>>><<<>>><<<>>>><<<<><>>><<>><<<<><<>>>><<<<><<<>><<<<>>>><<<><<<<>>><<<>>>><>>>><>>><<<>>>><>><>>><>>><<<>><<<<><<>>><><<<<>>>><<<>>>><<>><><>><>><>><<><<<<>>><>><<<>>>><<<<>>><<<>>><<<<>>><<>><<<>><>>><<<<>>>><<<<>><<<>>><<<><<<<>>>><<<>><<<<><<<<>>><<<>><<><<<>>>><<<<>><>>>><<<<>><>>><<><<>><<>><>>><<><<>><<><<<<>>>><>>>><<>>>><<<>>><<>>><<<>><<<<>>><>><<><<<>><<>><<<>>>><<<>>><<<<>><>>>><<><<<<><><<<>>>><><<<>><<<><<<>><<<<><<>><<>>><<>>><<<<>>>><<><>>><<<<>>><><<><<<<><<<<>>>><>>>><<>>><<<>><>><<><<<>><<>>><<<<>><<>>><<>>>><<<<>><<<>>><<>>><<<<><<>>><<><<>>><<<>><>><<<>>>><>>><<<><<<>><<>>>><<><>>><<<<>>>><<>>><<<>><<<<><<>>>><<<><<<<>>>><<>>><<><><<<><<<>>><>>>><<<>><<<<>>>><<<>><<<<>>><>>>><<<><>><>>><<<<>>>><>>><>>><<<<>>>><<>>>><<><<>>>><<<<>><>><<>>>><<>>>><>>><>><<<<>>>><<>>>><><>>>><<<<>>><<<<>>>><>>><<<>>><<<>><>>>><<<>>>><<<<>><<<<>>><<><<<><><<>>>><<<<>><<<<>><<>>>><<<>>>><<><<>>><>>><<<<>>><<<<>>>><<><><<<>><<><<<>>><<><<>>><<<>>><<>><<><<<>><><<<<>>>><<<>>>><<<>>><<<<>><<<>>><<>><<<>>><<<>>><<<>>>><>><><<<<>>><>><>>>><<>>><>>><>><<<>><<>><<<<>>>><<<><<<<>><<>>><>><<<>>>><<<>>><<>>><><<>>>><<<<>><<<><<>>>><<<>><<<>>>><<<<>>><<>>><<<<><<>>><<<<>>><<>>>><<<><>><<>>>><<><<>>><<<<>><>><<>>>><<>>><><<<><<<<>><><<><><<<<>>><<<>><>>>><<><<<<>>><<<<>>><<<<>>>><>><<><<<><<<>>><<>>><<<<>><<><<><<<><<<>>><<>><>>>><>>>><<<<>>>><<<>>>';

const goalRocksCount = 1000000000000;

const tetris = new Tetris({
    rocksCount: 4000,
    movesPattern,
});

tetris.run();

const snapshots = tetris.getPeriodicSnapshots();

console.log(snapshots[0]);
console.log(snapshots[0][0].rockIndex, snapshots[0][1].rockIndex - snapshots[0][0].rockIndex, snapshots[0][1].height - snapshots[0][0].height);

const patternStart = snapshots[0][0].rockIndex;
const patternStep = snapshots[0][1].rockIndex - snapshots[0][0].rockIndex;
const patternHeight = snapshots[0][1].height - snapshots[0][0].height;

const repeatingCount = Math.floor((goalRocksCount - patternStart) / patternStep);
const repeatingPartHeight = repeatingCount * patternHeight;


const lastPartRocksCount = goalRocksCount - patternStart - repeatingCount * patternStep;
const startPlusLastPartTetris = new Tetris({
    rocksCount: patternStart + lastPartRocksCount,
    movesPattern,
});
startPlusLastPartTetris.run();
const startPlusLastPartHeight = startPlusLastPartTetris.getHeight();


const height = repeatingPartHeight + startPlusLastPartHeight;

console.log(height);
console.log(snapshots.map(s => s.length));
